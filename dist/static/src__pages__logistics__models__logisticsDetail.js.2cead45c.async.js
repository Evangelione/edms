webpackJsonp([5],{qH3q:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Biqn"),n=r.n(a),s=(r("QX4N"),r("Gj0I")),o=(r("UQ5M"),r("/qCn")),c=r("En79"),d=r.n(c),u=r("fSis");t.default={namespace:"logisticsDetail",state:{step:0,detailForm:"",companyOption:[],carOption:{car_head:[],car_body:[],driver:[],supercargo:[]},billLoading:!1,showMap:!1},subscriptions:{setup:function(e){var t=e.dispatch;return e.history.listen(function(e){var r=e.pathname,a=e.query;"/logistics/logisticsDetail"===r&&t({type:"getDetail",payload:a})})}},effects:{getDetail:d.a.mark(function e(t,r){var a,n,s,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,s=r.put,e.next=4,n(u.getDetail,a);case 4:if(o=e.sent,c=o.data,1!==c.code){e.next=11;break}return e.next=9,s({type:"save",payload:{detailForm:c.data.order,step:c.data.order.deliver_status}});case 9:return e.next=11,s({type:"home/save",payload:{detailForm:c.data.order,step:c.data.order.deliver_status}});case 11:case"end":return e.stop()}},e,this)}),getCompanyOption:d.a.mark(function e(t,r){var a,n,s,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,s=r.put,e.next=4,n(u.getCompanyOption,a);case 4:if(o=e.sent,c=o.data,1!==c.code){e.next=11;break}return e.next=9,s({type:"save",payload:{companyOption:c.data.list}});case 9:return e.next=11,s({type:"home/save",payload:{companyOption:c.data.list}});case 11:case"end":return e.stop()}},e,this)}),getCarOption:d.a.mark(function e(t,r){var a,n,s,o,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,s=r.put,e.next=4,n(u.getCarOption,a);case 4:if(o=e.sent,c=o.data,1!==c.code){e.next=11;break}return e.next=9,s({type:"save",payload:{carOption:c.data}});case 9:return e.next=11,s({type:"home/save",payload:{carOption:c.data}});case 11:case"end":return e.stop()}},e,this)}),doDispatch:d.a.mark(function e(t,r){var a,n,s,c,i,p,l,f;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,s=r.put,c=r.select,e.next=4,n(u.doDispatch,a);case 4:return i=e.sent,p=i.data,e.next=8,c(function(e){return e.order.find_str});case 8:return l=e.sent,e.next=11,c(function(e){return e.order.order_type});case 11:if(f=e.sent,-1!==p.code){e.next=14;break}return e.abrupt("return",!1);case 14:if(1!==p.code){e.next=22;break}return o.a.success(p.msg),e.next=18,s({type:"order/save",payload:{currentTab:"icon-icon-test",currentIndex:0}});case 18:return e.next=20,s({type:"order/fetch",payload:{find_str:l,order_status:"3",order_type:f}});case 20:e.next=23;break;case 22:o.a.error(p.msg);case 23:case"end":return e.stop()}},e,this)}),uploadPound:d.a.mark(function e(t,r){var a,n,s,c,i,p,l,f,y,x,m,_,v;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=a.file,s=a.id,c=a.load_type,i=a.num,p=a.load_time,l=r.call,f=r.put,y=r.select,e.next=4,l(u.uploadPound,{file:n,id:s,load_type:c,num:i,load_time:p});case 4:return x=e.sent,m=x.data,e.next=8,y(function(e){return e.order.find_str});case 8:return _=e.sent,e.next=11,y(function(e){return e.order.order_type});case 11:if(v=e.sent,-1!==m.code){e.next=14;break}return e.abrupt("return",!1);case 14:if(1!==m.code){e.next=22;break}return o.a.success(m.msg),e.next=18,f({type:"order/save",payload:{currentTab:"icon-icon-test",currentIndex:0}});case 18:return e.next=20,f({type:"order/fetch",payload:{find_str:_,order_status:"3",order_type:v}});case 20:e.next=23;break;case 22:o.a.error(m.msg);case 23:case"end":return e.stop()}},e,this)}),uploadUnPound:d.a.mark(function e(t,r){var a,n,s,c,i,p,l,f,y,x,m,_,v;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=a.file,s=a.id,c=a.load_type,i=a.num,p=a.unload_time,l=r.call,f=r.put,y=r.select,e.next=4,l(u.uploadUnPound,{file:n,id:s,load_type:c,num:i,unload_time:p});case 4:return x=e.sent,m=x.data,e.next=8,y(function(e){return e.order.find_str});case 8:return _=e.sent,e.next=11,y(function(e){return e.order.order_type});case 11:if(v=e.sent,-1!==m.code){e.next=14;break}return e.abrupt("return",!1);case 14:if(1!==m.code){e.next=22;break}return o.a.success(m.msg),e.next=18,f({type:"order/save",payload:{currentTab:"icon-icon-test",currentIndex:0}});case 18:return e.next=20,f({type:"order/fetch",payload:{find_str:_,order_status:"3",order_type:v}});case 20:e.next=23;break;case 22:o.a.error(m.msg);case 23:case"end":return e.stop()}},e,this)}),confirmBill:d.a.mark(function e(t,r){var a,n,o,c,i,p,l,f,y,x,m;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=a.id,o=a.load_num,c=a.unload_num,i=r.call,p=r.put,l=r.select,e.next=4,p({type:"save",payload:{billLoading:!0}});case 4:return e.next=6,i(u.confirmBill,{id:n,load_num:o,unload_num:c});case 6:return f=e.sent,y=f.data,e.next=10,l(function(e){return e.order.find_str});case 10:return x=e.sent,e.next=13,l(function(e){return e.order.order_type});case 13:if(m=e.sent,-1!==y.code){e.next=16;break}return e.abrupt("return",!1);case 16:if(1!==y.code){e.next=24;break}return e.next=19,p({type:"order/save",payload:{currentTab:"icon-icon-test2",currentIndex:0}});case 19:return e.next=21,p({type:"order/fetch",payload:{find_str:x,order_status:"4",order_type:m}});case 21:s.a.success({message:"\u6e29\u99a8\u63d0\u793a",description:"\u8c03\u5ea6\u5df2\u5b8c\u6210\uff0c\u8bf7\u524d\u5f80 \u6211\u7684\u8ba2\u5355 \u786e\u8ba4\u7ed3\u7b97",duration:6}),e.next=25;break;case 24:s.a.error({message:"\u6e29\u99a8\u63d0\u793a",description:y.msg,duration:6});case 25:return e.next=27,p({type:"save",payload:{billLoading:!1}});case 27:case"end":return e.stop()}},e,this)})},reducers:{save:function(e,t){return n()({},e,t.payload)}}}}});