webpackJsonp([11],{Nm8I:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Biqn"),n=r.n(a),s=(r("UQ5M"),r("/qCn")),c=r("En79"),i=r.n(c),d=r("GbnL");t.default={namespace:"order",state:{list:[],page:1,total:0,order_type:"3",order_status:"",currentTab:"icon-icon-test3",find_str:"",statusNum:{},currentOrder:{},currentIndex:0,customOption:[],siteOption:[],supplierOption:[],goodsOption:[],modal_price:0,stime:"",etime:"",time_type:"1"},subscriptions:{setup:function(e){e.dispatch;return e.history.listen(function(e){e.pathname,e.query})}},effects:{fetch:i.a.mark(function e(t,r){var a,n,s,c,o,u,p,l,f,m,x,_,y,v,h,b,k,O,g,w,I;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=a.page,s=void 0===n?"1":n,c=a.order_type,o=void 0===c?"3":c,u=a.order_status,p=void 0===u?"":u,l=a.find_str,f=void 0===l?"":l,m=a.stime,x=void 0===m?"":m,_=a.etime,y=void 0===_?"":_,v=a.time_type,h=void 0===v?"1":v,b=r.call,k=r.put,O=r.select,e.next=4,b(d.getOrderList,{page:s,order_type:o,order_status:p,find_str:f,stime:x,etime:y,time_type:h});case 4:return g=e.sent,w=g.data,e.next=8,O(function(e){return e.order.currentIndex});case 8:if(I=e.sent,1!==w.code){e.next=14;break}return e.next=12,k({type:"save",payload:{page:parseInt(s,10),order_type:o,order_status:p,find_str:f,list:w.data.list,total:parseInt(w.data.count,10),currentOrder:w.data.list[I]?w.data.list[I]:{},statusNum:w.data.status_num,stime:x,etime:y,time_type:h}});case 12:return e.next=14,k({type:"home/save",payload:{currentOrder:w.data.list[I]?w.data.list[I]:{},order_type:o,find_str:f,stime:x,etime:y,time_type:h}});case 14:case"end":return e.stop()}},e,this)}),fetchSelect:i.a.mark(function e(t,r){var a,n,s,c,o,u,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,s=r.put,e.next=4,n(d.fetchCustom);case 4:return c=e.sent,e.next=7,n(d.fetchSupplier);case 7:return o=e.sent,e.next=10,n(d.fetchSite);case 10:return u=e.sent,e.next=13,n(d.fetchGoods);case 13:if(p=e.sent,1!==c.data.code||1!==o.data.code||1!==u.data.code||1!==p.data.code){e.next=17;break}return e.next=17,s({type:"save",payload:{customOption:c.data.data.list,supplierOption:o.data.data.list,siteOption:u.data.data.list,goodsOption:p.data.data.list}});case 17:case"end":return e.stop()}},e,this)}),fetchSite:i.a.mark(function e(t,r){var a,n,s,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload.customer_id,n=r.call,s=r.put,e.next=4,n(d.fetchSite,{customer_id:a});case 4:if(c=e.sent,o=c.data,1!==o.code){e.next=9;break}return e.next=9,s({type:"save",payload:{siteOption:o.data.list}});case 9:case"end":return e.stop()}},e,this)}),fetchGoods:i.a.mark(function e(t,r){var a,n,s,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload.supplier_id,n=r.call,s=r.put,e.next=4,n(d.fetchGoods,{supplier_id:a});case 4:if(c=e.sent,o=c.data,1!==o.code){e.next=9;break}return e.next=9,s({type:"save",payload:{goodsOption:o.data.list}});case 9:case"end":return e.stop()}},e,this)}),addOrder:i.a.mark(function e(t,r){var a,n,c,o,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload.values,n=r.call,c=r.put,e.next=4,n(d.addOrder,{values:a});case 4:if(o=e.sent,u=o.data,-1!==u.code){e.next=8;break}return e.abrupt("return",!1);case 8:1===u.code?s.a.success(u.msg):s.a.error(u.msg);case 9:case"end":return e.stop()}},e,this)}),delOrder:i.a.mark(function e(t,r){var a,n,c,o,u,p,l,f,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload.id,n=r.call,c=r.put,o=r.select,e.next=4,n(d.delOrder,{id:a});case 4:return u=e.sent,p=u.data,e.next=8,o(function(e){return e.order.find_str});case 8:return l=e.sent,e.next=11,o(function(e){return e.order.order_type});case 11:return f=e.sent,e.next=14,o(function(e){return e.order.order_status});case 14:if(m=e.sent,-1!==p.code){e.next=17;break}return e.abrupt("return",!1);case 17:if(1!==p.code){e.next=23;break}return s.a.success(p.msg),e.next=21,c({type:"order/fetch",payload:{find_str:l,order_status:m,order_type:f}});case 21:e.next=24;break;case 23:s.a.error(p.msg);case 24:case"end":return e.stop()}},e,this)}),getModalPrice:i.a.mark(function e(t,r){var a,n,c,o,u,p,l,f,m,x,_;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=a.purchase_price,c=a.deliver_price,o=a.price,u=a.distance,p=a.saler_num,l=r.call,f=r.put,m=r.select,e.next=4,l(d.getModalPrice,{purchase_price:n,deliver_price:c,price:o,distance:u,saler_num:p});case 4:if(x=e.sent,_=x.data,-1!==_.code){e.next=8;break}return e.abrupt("return",!1);case 8:if(1!==_.code){e.next=13;break}return e.next=11,f({type:"save",payload:{modal_price:_.model_price}});case 11:e.next=14;break;case 13:s.a.error(_.msg);case 14:case"end":return e.stop()}},e,this)})},reducers:{save:function(e,t){return n()({},e,t.payload)}}}}});