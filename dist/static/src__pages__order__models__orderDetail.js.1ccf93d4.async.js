webpackJsonp([5],{GbnL:function(e,t,r){"use strict";function a(e){var t=e.page,r=e.order_status,a=e.find_str,n=new FormData;return n.append("page",t),n.append("limit",y.b),n.append("order_status",r),n.append("find_str",a),Object(b.a)("".concat(y.a,"/home/order/order-list"),{method:"POST",body:n})}function n(){return Object(b.a)("".concat(y.a,"/home/select/customer"),{method:"POST"})}function o(e){var t=e.customer_id,r=new FormData;return r.append("customer_id",t),Object(b.a)("".concat(y.a,"/home/select/site"),{method:"POST",body:r})}function d(){return Object(b.a)("".concat(y.a,"/home/select/supplier"),{method:"POST"})}function c(e){var t=e.supplier_id,r=new FormData;return r.append("supplier_id",t),Object(b.a)("".concat(y.a,"/home/select/goods"),{method:"POST",body:r})}function s(e){var t=e.values,r=new FormData;return h()(t).forEach(function(e,a){r.append(e,t[e])}),Object(b.a)("".concat(y.a,"/home/order/add-order"),{method:"POST",body:r})}function u(e){var t=e.id,r=new FormData;return r.append("id",t),Object(b.a)("".concat(y.a,"/home/order/order-info"),{method:"POST",body:r})}function i(e){var t=new FormData;return h()(e).forEach(function(r,a){t.append(r,e[r])}),Object(b.a)("".concat(y.a,"/home/order/modify-order"),{method:"POST",body:t})}function p(e){var t=e.id,r=new FormData;return r.append("id",t),Object(b.a)("".concat(y.a,"/home/order/pay"),{method:"POST",body:r})}function l(e){var t=e.id,r=new FormData;return r.append("id",t),Object(b.a)("".concat(y.a,"/home/order/cancel-order"),{method:"POST",body:r})}function f(e){var t=new FormData;return h()(e).forEach(function(r,a){t.append(r,e[r])}),Object(b.a)("".concat(y.a,"/home/order/settled"),{method:"POST",body:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOrderList=a,t.fetchCustom=n,t.fetchSite=o,t.fetchSupplier=d,t.fetchGoods=c,t.addOrder=s,t.orderInfo=u,t.modifyOrder=i,t.doPay=p,t.cancelOrder=l,t.doResult=f;var m=r("oXS2"),h=r.n(m),b=r("vLgD"),y=r("oiih")},QdHS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("irdN"),n=r.n(a),o=(r("UQ5M"),r("/qCn")),d=r("zIwb"),c=r.n(d),s=r("GbnL"),u=r("7xWd");r.n(u);t.default={namespace:"orderDetail",state:{editable:!1,isSuccess:"success",step:0,detailForm:"",modifyForm:"",modifyId:""},subscriptions:{setup:function(e){var t=e.dispatch;return e.history.listen(function(e){var r=e.pathname;e.query,"/order/orderDetail"===r&&t({type:"save",payload:{editable:!1}})})}},effects:{orderInfo:c.a.mark(function e(t,r){var a,n,o,d,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,o=r.put,e.next=4,n(s.orderInfo,a);case 4:if(d=e.sent,u=d.data,1!==u.code){e.next=15;break}return e.next=9,o({type:"order/fetchSelect"});case 9:return e.next=11,o({type:"order/fetchSite",payload:{customer_id:u.data.order.cust_id}});case 11:return e.next=13,o({type:"order/fetchGoods",payload:{supplier_id:u.data.order.supp_id}});case 13:return e.next=15,o({type:"save",payload:{detailForm:u.data.order,step:u.data.order.order_status}});case 15:case"end":return e.stop()}},e,this)}),modifyForm:c.a.mark(function e(t,r){var a,n,d,u,i,p,l,f,m,h;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,d=r.put,u=r.select,e.next=4,u(function(e){return e.orderDetail.modifyForm});case 4:return i=e.sent,e.next=7,u(function(e){return e.orderDetail.modifyId});case 7:if(p=e.sent,l=null,f=!1,i.validateFields(function(e,t){e?f=!0:(delete t.cust_id2,delete t.cust_id3,delete t.delivery,delete t.goods_adress,delete t.goods_contact,delete t.goods_delivery,delete t.goods_source,delete t.adress,delete t.goods_mobile,delete t.lianxidianhua,delete t.qiyuanchandi,delete t.shuliang,delete t.site_id2,delete t.site_id3,delete t.supp_id2,delete t.supp_id3,delete t.xiaoshouyuan,t.recv_time=t.recv_time.format("YYYY-MM-DD hh:00:00"),t.id=p,l=t)}),!f){e.next=14;break}return o.a.warning("\u9a8c\u8bc1\u4e0d\u901a\u8fc7\uff01\u8bf7\u68c0\u67e5\u5b57\u6bb5\u662f\u5426\u7b26\u5408\u8981\u6c42\uff01"),e.abrupt("return",!1);case 14:return e.next=16,n(s.modifyOrder,l);case 16:if(m=e.sent,h=m.data,-1!==h.code){e.next=20;break}return e.abrupt("return",!1);case 20:if(1!==h.code){e.next=26;break}return o.a.success(h.msg),e.next=24,d({type:"save",payload:{editable:!1}});case 24:e.next=27;break;case 26:o.a.error(h.msg);case 27:case"end":return e.stop()}},e,this)}),doPay:c.a.mark(function e(t,r){var a,n,d,u,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,d=r.put,e.next=4,n(s.doPay,a);case 4:if(u=e.sent,i=u.data,-1!==i.code){e.next=8;break}return e.abrupt("return",!1);case 8:if(1!==i.code){e.next=14;break}return o.a.success(i.msg),e.next=12,d({type:"save",payload:{isSuccess:"success"}});case 12:e.next=17;break;case 14:return o.a.error(i.msg),e.next=17,d({type:"save",payload:{isSuccess:"error"}});case 17:case"end":return e.stop()}},e,this)}),cancelOrder:c.a.mark(function e(t,r){var a,n,d,i,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,d=r.put,e.next=4,n(s.cancelOrder,a);case 4:if(i=e.sent,p=i.data,-1!==p.code){e.next=8;break}return e.abrupt("return",!1);case 8:if(1!==p.code){e.next=14;break}return o.a.success(p.msg),e.next=12,d(u.routerRedux.push({pathname:"/order"}));case 12:e.next=15;break;case 14:o.a.error(p.msg);case 15:case"end":return e.stop()}},e,this)}),doResult:c.a.mark(function e(t,r){var a,n,d,i,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,n=r.call,d=r.put,e.next=4,n(s.doResult,a);case 4:if(i=e.sent,p=i.data,-1!==p.code){e.next=8;break}return e.abrupt("return",!1);case 8:if(1!==p.code){e.next=14;break}return o.a.success(p.msg),e.next=12,d(u.routerRedux.push({pathname:"/order"}));case 12:e.next=15;break;case 14:o.a.error(p.msg);case 15:case"end":return e.stop()}},e,this)})},reducers:{save:function(e,t){return n()({},e,t.payload)}}}}});