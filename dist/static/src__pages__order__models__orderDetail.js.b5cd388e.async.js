webpackJsonp([8],{GbnL:function(e,r,t){"use strict";function a(e){var r=e.page,t=e.order_status,a=e.find_str,n=e.order_type,o=e.stime,d=e.etime,c=new FormData;return c.append("page",r),c.append("limit",8),c.append("order_status",t),c.append("find_str",a),c.append("order_type",n),c.append("stime",o),c.append("etime",d),Object(_.a)("".concat(v.a,"/home/order/order-list"),{method:"POST",body:c})}function n(){return Object(_.a)("".concat(v.a,"/home/select/customer"),{method:"POST"})}function o(e){var r=e.customer_id,t=new FormData;return t.append("customer_id",r),Object(_.a)("".concat(v.a,"/home/select/site"),{method:"POST",body:t})}function d(){return Object(_.a)("".concat(v.a,"/home/select/supplier"),{method:"POST"})}function c(e){var r=e.supplier_id,t=new FormData;return t.append("supplier_id",r),Object(_.a)("".concat(v.a,"/home/select/goods"),{method:"POST",body:t})}function s(e){var r=e.values,t=new FormData;return x()(r).forEach(function(e,a){t.append(e,r[e])}),Object(_.a)("".concat(v.a,"/home/order/add-order"),{method:"POST",body:t})}function u(e){var r=e.id,t=new FormData;return t.append("id",r),Object(_.a)("".concat(v.a,"/home/order/order-info"),{method:"POST",body:t})}function i(e){var r=e.form,t=new FormData;return x()(r).forEach(function(e,a){t.append(e,r[e])}),Object(_.a)("".concat(v.a,"/home/order/modify-order"),{method:"POST",body:t})}function p(e){var r=e.form,t=new FormData;return x()(r).forEach(function(e,a){t.append(e,r[e])}),Object(_.a)("".concat(v.a,"/home/order/confirm-order"),{method:"POST",body:t})}function f(e){var r=e.id,t=new FormData;return t.append("id",r),Object(_.a)("".concat(v.a,"/home/order/pay"),{method:"POST",body:t})}function l(e){var r=e.id,t=new FormData;return t.append("id",r),Object(_.a)("".concat(v.a,"/home/order/cancel-order"),{method:"POST",body:t})}function m(e){var r=new FormData;return x()(e).forEach(function(t,a){r.append(t,e[t])}),Object(_.a)("".concat(v.a,"/home/order/settled"),{method:"POST",body:r})}function y(e){var r=e.id,t=new FormData;return t.append("id",r),Object(_.a)("".concat(v.a,"/home/order/delete-order"),{method:"POST",body:t})}function h(e){var r=e.purchase_price,t=e.deliver_price,a=e.price,n=e.distance,o=e.saler_num,d=new FormData;return d.append("purchase_price",r),d.append("deliver_price",t),d.append("saler_price",a),d.append("distance",n),d.append("saler_num",o),Object(_.a)("".concat(v.a,"/home/order/saler-model"),{method:"POST",body:d})}Object.defineProperty(r,"__esModule",{value:!0}),r.getOrderList=a,r.fetchCustom=n,r.fetchSite=o,r.fetchSupplier=d,r.fetchGoods=c,r.addOrder=s,r.orderInfo=u,r.modifyOrder=i,r.confirmOrder=p,r.doPay=f,r.cancelOrder=l,r.doResult=m,r.delOrder=y,r.getModalPrice=h;var b=t("qO4g"),x=t.n(b),_=t("vLgD"),v=t("oiih")},QdHS:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("Biqn"),n=t.n(a),o=(t("QX4N"),t("Gj0I")),d=(t("UQ5M"),t("/qCn")),c=t("En79"),s=t.n(c),u=t("GbnL");r.default={namespace:"orderDetail",state:{editable:!1,isSuccess:"success",step:0,detailForm:"",modifyForm:"",modifyId:"",showMap:!1},subscriptions:{setup:function(e){var r=e.dispatch;return e.history.listen(function(e){var t=e.pathname;e.query,"/order/orderDetail"===t&&r({type:"save",payload:{editable:!1}})})}},effects:{orderInfo:s.a.mark(function e(r,t){var a,n,o,d,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.payload,n=t.call,o=t.put,e.next=4,n(u.orderInfo,a);case 4:if(d=e.sent,c=d.data,1!==c.code){e.next=17;break}return e.next=9,o({type:"order/fetchSelect"});case 9:return e.next=11,o({type:"order/fetchSite",payload:{customer_id:c.data.order.cust_id}});case 11:return e.next=13,o({type:"order/fetchGoods",payload:{supplier_id:c.data.order.supp_id}});case 13:return e.next=15,o({type:"save",payload:{detailForm:c.data.order,step:c.data.order.order_status}});case 15:return e.next=17,o({type:"home/save",payload:{detailForm:c.data.order,step:c.data.order.order_status}});case 17:case"end":return e.stop()}},e,this)}),modifyForm:s.a.mark(function e(r,t){var a,n,c,i,p,f,l,m,y,h;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.payload,n=t.call,c=t.put,i=t.select,e.next=4,i(function(e){return e.orderDetail.modifyForm});case 4:return p=e.sent,e.next=7,i(function(e){return e.orderDetail.modifyId});case 7:if(f=e.sent,l=null,m=!1,p.validateFields(function(e,r){e?m=!0:(delete r.cust_id2,delete r.cust_id3,delete r.delivery,delete r.goods_adress,delete r.goods_contact,delete r.goods_delivery,delete r.goods_source,delete r.adress,delete r.goods_mobile,delete r.lianxidianhua,delete r.qiyuanchandi,delete r.shuliang,delete r.site_id2,delete r.site_id3,delete r.supp_id2,delete r.supp_id3,delete r.xiaoshouyuan,r.recv_time=r.recv_time.format("YYYY-MM-DD hh:00:00"),r.id=f,l=r)}),!m){e.next=14;break}return d.a.warning("\u9a8c\u8bc1\u4e0d\u901a\u8fc7\uff01\u8bf7\u68c0\u67e5\u5b57\u6bb5\u662f\u5426\u7b26\u5408\u8981\u6c42\uff01"),e.abrupt("return",!1);case 14:return e.next=16,n(u.modifyOrder,l);case 16:if(y=e.sent,h=y.data,-1!==h.code){e.next=20;break}return e.abrupt("return",!1);case 20:if(1!==h.code){e.next=26;break}return e.next=23,c({type:"save",payload:{editable:!1}});case 23:o.a.success({message:"\u6e29\u99a8\u63d0\u793a",description:"\u8ba2\u5355\u5df2\u4fee\u6539\uff0c\u8bf7\u786e\u8ba4\u652f\u4ed8",duration:6}),e.next=27;break;case 26:d.a.error(h.msg);case 27:case"end":return e.stop()}},e,this)}),doPay:s.a.mark(function e(r,t){var a,n,o,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.payload,n=t.call,o=t.put,e.next=4,n(u.doPay,a);case 4:if(c=e.sent,i=c.data,-1!==i.code){e.next=8;break}return e.abrupt("return",!1);case 8:if(1!==i.code){e.next=14;break}return d.a.success(i.msg),e.next=12,o({type:"save",payload:{isSuccess:"success"}});case 12:e.next=17;break;case 14:return d.a.error(i.msg),e.next=17,o({type:"save",payload:{isSuccess:"error"}});case 17:case"end":return e.stop()}},e,this)}),cancelOrder:s.a.mark(function e(r,t){var a,n,o,c,i,p,f,l,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.payload,n=t.call,o=t.put,c=t.select,e.next=4,n(u.cancelOrder,a);case 4:return i=e.sent,p=i.data,e.next=8,c(function(e){return e.order.find_str});case 8:return f=e.sent,e.next=11,c(function(e){return e.order.order_status});case 11:return l=e.sent,e.next=14,c(function(e){return e.order.page});case 14:if(m=e.sent,-1!==p.code){e.next=17;break}return e.abrupt("return",!1);case 17:if(1!==p.code){e.next=23;break}return d.a.success(p.msg),e.next=21,o({type:"order/fetch",payload:{find_str:f,order_status:l,page:m}});case 21:e.next=24;break;case 23:d.a.error(p.msg);case 24:case"end":return e.stop()}},e,this)}),doResult:s.a.mark(function e(r,t){var a,n,c,i,p,f,l,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.payload,n=t.call,c=t.put,i=t.select,e.next=4,n(u.doResult,a);case 4:return p=e.sent,f=p.data,e.next=8,i(function(e){return e.order.find_str});case 8:return l=e.sent,e.next=11,i(function(e){return e.order.order_type});case 11:if(m=e.sent,-1!==f.code){e.next=14;break}return e.abrupt("return",!1);case 14:if(1!==f.code){e.next=23;break}return d.a.success(f.msg),e.next=18,c({type:"order/fetch",payload:{find_str:l,order_status:"5",order_type:m}});case 18:return e.next=20,c({type:"order/save",payload:{currentTab:"icon-icon-test7",currentIndex:0}});case 20:o.a.success({message:"\u6e29\u99a8\u63d0\u793a",description:"\u8bf7\u524d\u5f80 \u6211\u7684\u5ba2\u6237-\u9500\u552e\u660e\u7ec6\uff0c\u6211\u7684\u4f9b\u5e94\u5546-\u91c7\u8d2d\u660e\u7ec6\uff0c\u6211\u7684\u8d26\u52a1-\u6570\u636e\u5206\u6790 \u5bf9\u8d26",duration:12}),e.next=24;break;case 23:d.a.error(f.msg);case 24:case"end":return e.stop()}},e,this)}),modifySave:s.a.mark(function e(r,t){var a,n,o,c,i,p,f,l,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.payload.form,n=t.call,o=t.put,c=t.select,e.next=4,n(u.modifyOrder,{form:a});case 4:return i=e.sent,p=i.data,e.next=8,c(function(e){return e.order.find_str});case 8:return f=e.sent,e.next=11,c(function(e){return e.order.order_type});case 11:return l=e.sent,e.next=14,c(function(e){return e.order.order_status});case 14:if(m=e.sent,-1!==p.code){e.next=17;break}return e.abrupt("return",!1);case 17:if(1!==p.code){e.next=31;break}if("\u6062\u590d\u6210\u529f"!==p.msg){e.next=26;break}return d.a.success(p.msg),e.next=22,o({type:"order/fetch",payload:{find_str:f,order_status:p.flag,order_type:l}});case 22:return e.next=24,o({type:"order/save",payload:{currentTab:"icon-icon-test9",currentIndex:0}});case 24:e.next=29;break;case 26:return d.a.success(p.msg),e.next=29,o({type:"order/fetch",payload:{find_str:f,order_status:m,order_type:l}});case 29:e.next=32;break;case 31:d.a.error(p.msg);case 32:case"end":return e.stop()}},e,this)}),confirmOrder:s.a.mark(function e(r,t){var a,n,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.payload.form,n=t.call,e.next=4,n(u.confirmOrder,{form:a});case 4:if(o=e.sent,c=o.data,-1!==c.code){e.next=8;break}return e.abrupt("return",!1);case 8:1===c.code?d.a.success(c.msg):d.a.error(c.msg);case 9:case"end":return e.stop()}},e,this)})},reducers:{save:function(e,r){return n()({},e,r.payload)}}}}});